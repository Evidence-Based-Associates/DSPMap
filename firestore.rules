rules_version = '2';

service cloud.firestore {

  match /databases/{database}/documents {
  
    function isUser(uid) {
    	let userDatabasePath = /databases/$(database)/documents/users/$(uid);
      return true; //exists(userDatabasePath);
    }
    
    match /{document=**} {
      allow read, write: if false;
    }
    match /meta/{document=**} {
    	allow read: if true;
      allow write: if isUser(request.auth.uid);
    }
    match /providers/{document=**} {
    	allow read: if true;
      allow write: if isUser(request.auth.uid); 
    }
    match /{path=**}/locations/{doc} {
  		allow read: if true;	
		}
    match /{path=**}/services/{doc} {
  		allow read: if true;	
		}
  }
}